
<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CapricEngine</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Rajdhani:wght@400;500;600;700&family=Fira+Code:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style/core-layout.css">
  <link rel="stylesheet" href="style/components.css">
  <link rel="stylesheet" href="style/theme-visuals.css">
  <script src="lib/midiwriter.js"></script>
</head>
<body>
  <header>
    <img src="CapricEngine_LogoW.svg" alt="CapricEngine Logo" id="appLogo">
    <p>Create musical architectures - v2.20 </p> </header>

  <main>
    <section id="input-controls-section" class="main-content-section"> <form id="songParamsForm">
        <div>
          <label for="mood">Main Mood:</label>
          <select id="mood" name="mood">
            <option value="malinconico_introspettivo">Melancholic / Introspective</option>
            <option value="ansioso_distopico">Anxious / Dystopian</option>
            <option value="etereo_sognante">Ethereal / Dreamy</option>
            <option value="arrabbiato_critico">Angry / Critical</option>
            <option value="sperimentale_astratto">Experimental / Abstract</option>
            <option value="very_normal_person" selected>Very Normal Person (Pop/Rock)</option>
          </select>
        </div>

        <div>
          <label for="tempo_feeling">Tempo Feeling:</label>
          <select id="tempo_feeling" name="tempo_feeling">
            <option value="lento_atmosferico">Slow & Atmospheric (60‑85 BPM)</option>
            <option value="mid_tempo_groove" selected>Mid‑Tempo with Groove (90‑115 BPM)</option>
            <option value="incalzante_energico">Upbeat / Energetic (120‑150 BPM)</option>
          </select>
        </div>

        <div>
          <label for="forceTimeSignature">Meter:</label>
          <select id="forceTimeSignature" name="forceTimeSignature">
            <option value="random" selected>Random (based on Mood)</option>
            <option value="4/4">4/4</option>
            <option value="3/4">3/4</option>
            <option value="6/8">6/8</option>
            <option value="2/4">2/4</option>
            <option value="12/8">12/8</option>
            <option value="5/4">5/4</option>
            <option value="7/8">7/8</option>
            <option value="9/8">9/8</option>
                   <option value="5/8">5/8</option>
          </select>
        </div>

        <div>
          <label for="songStructure">Structure Template:</label>
          <select id="songStructure" name="songStructure">
            <option value="random" selected>Random</option>
          </select>
        </div>
        <div>
          <label for="keySelection">Key (Optional):</label>
          <select id="keySelection" name="keySelection">
            <option value="random" selected>Random</option>
            </select>
        </div>

        <div class="button-container">
          <button type="button" id="generateButton">Generate</button>
        </div>
      </form>
    </section>

    <section id="song-output-container" class="main-content-section"> <div id="songOutput">
        <p><em>Premi "Generate" per creare la tua bozza...</em></p>
      </div>
    </section>
  </main>

  <footer>
    <p>&copy; Phalbo Music Services. </p>
  </footer>

<!-- CONFIG -->
<script src="lib/config-music-data.js"></script>
<script src="lib/theory-helpers.js"></script>
<script src="lib/harmonic-patterns-config.js"></script>
<script src="lib/passing-chords-config.js"></script>
<script src="lib/vocal_profiles.js"></script>
<script src="lib/rhythm-patterns.js"></script>

<!-- CORE RENDER + UTILS -->
<script src="lib/chord-renderer.js"></script>
<script src="lib/scale-renderer.js"></script>
<script src="lib/drum-patterns-library.js"></script>
<script src="lib/chord-rhythm-generator.js"></script>

<!-- GENERATORI (devono venire *dopo* le config e helpers) -->
<script src="gen/melody-generator.js"></script>
<script src="gen/bass-pitch-selector.js"></script>
<script src="gen/generateBassLineForSong.js"></script>
<script src="gen/generateVocalLineForSong.js"></script>
<script src="gen/generateDrumTrackForSong.js"></script>

<!-- MAIN LOGIC -->
<script src="main/app-song-generation.js"></script>
<script src="main/app-ui-render.js"></script>
<script src="main/app-midi-export.js"></script>
<script src="main/app-setup.js"></script>


</body>
</html>
